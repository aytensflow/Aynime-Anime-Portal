<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Anime List - Aynime</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Body Gradient Pink */
    body {
      background: linear-gradient(-45deg, #ffb6c1, #ff69b4, #ffc0cb, #ff1493);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: white;
      min-height: 100vh;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Header */
    header {
      background: linear-gradient(90deg, #ff69b4, #ff1493, #ff69b4, #ffb6c1);
      background-size: 400% 400%;
      animation: gradientHeader 5s ease infinite;
      padding: 25px;
      text-align: center;
      font-size: 2.5rem;
      font-weight: bold;
      color: #fff;
      letter-spacing: 2px;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      position: relative;
      cursor: pointer;
    }
    header:hover { transform: scale(1.02); transition: transform 0.3s; }
    @keyframes gradientHeader {
      0% { background-position: 0% 50%; transform: scale(1); }
      50% { background-position: 100% 50%; transform: scale(1.05); }
      100% { background-position: 0% 50%; transform: scale(1); }
    }

    /* User links */
    .user-links {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 1rem;
    }
    .user-links a { color: #fffacd; text-decoration: none; margin-left: 10px; }
    .user-links a:hover { color: #ff1493; }

    /* Anime grid */
    .anime-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px; }
    .anime-card {
      background: rgba(255, 182, 193, 0.7);
      border-radius: 12px;
      overflow: hidden;
      text-align: center;
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .anime-card:hover { transform: scale(1.05); box-shadow: 0 0 20px #ff69b4; }
    .anime-card img { width: 100%; height: 250px; object-fit: cover; border-radius: 12px; }
    .anime-card h6 { margin: 10px 0; color: #fff; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); }
    .status-badge { margin-bottom: 10px; font-weight: bold; }

    /* Alerts */
    .alert { max-width: 500px; margin: 20px auto; }

    /* Section headers */
    h4.status-section { margin-top: 40px; border-bottom: 1px solid #ff69b4; padding-bottom: 5px; }

    /* Footer */
    footer {
      background: rgba(255, 182, 193, 0.7);
      color: #fff;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      border-top: 1px solid #ff69b4;
    }
    footer a { color: #ff1493; text-decoration: none; margin: 0 5px; }
    footer a:hover { color: #fffacd; }
  </style>
</head>
<body>
  <header onclick="window.location='/'">
    ðŸ”¥ Aynime Anime Portal ðŸ”¥
    <div class="user-links">
      {% if session.get('user') %}
        Welcome, {{ session.get('user') }} | 
        <a href="{{ url_for('my_list') }}">My List</a> | 
        <a href="{{ url_for('logout') }}">Logout</a>
      {% else %}
        <a href="{{ url_for('login') }}">Login</a> | 
        <a href="{{ url_for('signup') }}">Sign Up</a>
      {% endif %}
    </div>
  </header>

  <!-- Flash messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="container mt-4">
    <h2 class="text-center mb-4">My Anime List</h2>

    {% if my_list %}
      {% for status in ['Watching', 'Plan to Watch', 'Dropped', 'Completed'] %}
        {% set filtered = my_list | selectattr("status", "equalto", status) | list %}
        {% if filtered %}
          <h4 class="status-section">{{ status }}</h4>
          <div class="anime-grid">
            {% for anime in filtered %}
              <div class="anime-card">
                <a href="{{ url_for('anime_page', mal_id=anime.mal_id) }}">
                  <img src="{{ anime.image }}" alt="{{ anime.title }}">
                  <h6>{{ anime.title }}</h6>
                </a>
                <span class="badge bg-warning text-dark status-badge">{{ anime.status }}</span>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endfor %}
    {% else %}
      <p class="text-center mt-5">Your list is empty. Add some anime from the homepage! ðŸ’–</p>
      <div class="text-center mt-3">
        <a href="{{ url_for('home') }}" class="btn btn-warning">â¬… Back to Home</a>
      </div>
    {% endif %}
  </div>

  <footer>
    <p>Â© 2025 Aynime. Created by Ayten Sema ðŸ’–</p>
    <p>
      <a href="{{ url_for('about') }}">About Me</a> | 
      <a href="{{ url_for('contact') }}">Contact</a> | 
      <a href="{{ url_for('credits') }}">Credits</a>
    </p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
